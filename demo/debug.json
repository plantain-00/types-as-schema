[
  {
    "kind": "enum",
    "name": "RequestProtocolKind",
    "type": "string",
    "members": {
      "searchLogs": "search logs",
      "searchSamples": "search samples",
      "resaveFailedLogs": "resave failed logs"
    }
  },
  {
    "kind": "enum",
    "name": "ProtocolKind",
    "type": "string",
    "members": {
      "flows": "flows",
      "historySamples": "history samples",
      "searchLogsResult": "search logs result",
      "searchSamplesResult": "search samples result",
      "resaveFailedLogsResult": "resave failed logs result"
    }
  },
  {
    "kind": "enum",
    "name": "ResultKind",
    "type": "string",
    "members": {
      "success": "success",
      "fail": "fail"
    }
  },
  {
    "kind": "enum",
    "name": "FlowKind",
    "type": "string",
    "members": {
      "log": "log",
      "sample": "sample"
    }
  },
  {
    "kind": "object",
    "name": "RequestProtocol",
    "members": [
      {
        "name": "requestId",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "search logs",
            "search samples",
            "resave failed logs"
          ]
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "searchLogs",
        "type": {
          "kind": "reference",
          "name": "SearchLogs"
        },
        "optional": true,
        "tag": 3
      },
      {
        "name": "searchSamples",
        "type": {
          "kind": "reference",
          "name": "SearchSamples"
        },
        "optional": true,
        "tag": 4
      }
    ],
    "minProperties": 2,
    "maxProperties": 3,
    "entry": "request-protocol.json"
  },
  {
    "kind": "object",
    "name": "SearchLogs",
    "members": [
      {
        "name": "content",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "time",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "hostname",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 3
      },
      {
        "name": "from",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 4
      },
      {
        "name": "size",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 5
      }
    ],
    "minProperties": 5,
    "maxProperties": 5
  },
  {
    "kind": "object",
    "name": "SearchSamples",
    "members": [
      {
        "name": "from",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "to",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 2
      }
    ],
    "minProperties": 2,
    "maxProperties": 2
  },
  {
    "kind": "object",
    "name": "ResponseProtocol",
    "members": [
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "flows",
            "history samples",
            "search logs result",
            "search samples result",
            "resave failed logs result"
          ]
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "flows",
        "type": {
          "kind": "reference",
          "name": "Flows"
        },
        "optional": true,
        "tag": 2
      },
      {
        "name": "historySamples",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "SampleFrame"
          }
        },
        "optional": true,
        "tag": 3
      },
      {
        "name": "searchLogsResult",
        "type": {
          "kind": "reference",
          "name": "SearchLogsResult"
        },
        "optional": true,
        "tag": 4
      },
      {
        "name": "searchSamplesResult",
        "type": {
          "kind": "reference",
          "name": "SearchSamplesResult"
        },
        "optional": true,
        "tag": 5
      },
      {
        "name": "resaveFailedLogsResult",
        "type": {
          "kind": "reference",
          "name": "ResaveFailedLogsResult"
        },
        "optional": true,
        "tag": 6
      }
    ],
    "minProperties": 1,
    "maxProperties": 2,
    "entry": "response-protocol.json"
  },
  {
    "kind": "object",
    "name": "Flows",
    "members": [
      {
        "name": "serverTime",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "flows",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "Flow"
          }
        },
        "optional": false,
        "tag": 2
      }
    ],
    "minProperties": 2,
    "maxProperties": 2
  },
  {
    "kind": "object",
    "name": "SearchLogsResult",
    "members": [
      {
        "name": "requestId",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "success",
            "fail"
          ]
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "total",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": true,
        "tag": 3
      },
      {
        "name": "logs",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "Log"
          }
        },
        "optional": true,
        "tag": 4
      },
      {
        "name": "error",
        "type": {
          "kind": "string"
        },
        "optional": true,
        "tag": 5
      }
    ],
    "minProperties": 3,
    "maxProperties": 4
  },
  {
    "kind": "object",
    "name": "SearchSamplesResult",
    "members": [
      {
        "name": "requestId",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "success",
            "fail"
          ]
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "searchSampleResult",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "SampleFrame"
          }
        },
        "optional": true,
        "tag": 3
      },
      {
        "name": "error",
        "type": {
          "kind": "string"
        },
        "optional": true,
        "tag": 4
      }
    ],
    "minProperties": 2,
    "maxProperties": 3
  },
  {
    "kind": "object",
    "name": "ResaveFailedLogsResult",
    "members": [
      {
        "name": "requestId",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "success",
            "fail"
          ]
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "savedCount",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": true,
        "tag": 3
      },
      {
        "name": "totalCount",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": true,
        "tag": 4
      },
      {
        "name": "error",
        "type": {
          "kind": "string"
        },
        "optional": true,
        "tag": 5
      }
    ],
    "minProperties": 3,
    "maxProperties": 4
  },
  {
    "kind": "object",
    "name": "SampleFrame",
    "members": [
      {
        "name": "time",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "samples",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "Sample"
          }
        },
        "optional": true,
        "tag": 2
      }
    ],
    "minProperties": 1,
    "maxProperties": 2
  },
  {
    "kind": "object",
    "name": "FlowProtocol",
    "members": [
      {
        "name": "flows",
        "type": {
          "kind": "array",
          "type": {
            "kind": "reference",
            "name": "Flow"
          }
        },
        "optional": false,
        "tag": 1
      }
    ],
    "minProperties": 1,
    "maxProperties": 1,
    "entry": "flow-protocol.json"
  },
  {
    "kind": "object",
    "name": "Flow",
    "members": [
      {
        "name": "kind",
        "type": {
          "kind": "enum",
          "type": "string",
          "enums": [
            "log",
            "sample"
          ]
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "log",
        "type": {
          "kind": "reference",
          "name": "Log"
        },
        "optional": true,
        "tag": 2
      },
      {
        "name": "sample",
        "type": {
          "kind": "reference",
          "name": "Sample"
        },
        "optional": true,
        "tag": 3
      }
    ],
    "minProperties": 2,
    "maxProperties": 2
  },
  {
    "kind": "object",
    "name": "Log",
    "members": [
      {
        "name": "time",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "content",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 2
      },
      {
        "name": "filepath",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 3
      },
      {
        "name": "hostname",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 4
      }
    ],
    "minProperties": 4,
    "maxProperties": 4
  },
  {
    "kind": "object",
    "name": "Sample",
    "members": [
      {
        "name": "hostname",
        "type": {
          "kind": "string"
        },
        "optional": false,
        "tag": 1
      },
      {
        "name": "port",
        "type": {
          "kind": "number",
          "type": "uint32"
        },
        "optional": true,
        "tag": 2
      },
      {
        "name": "values",
        "type": {
          "kind": "map",
          "key": {
            "kind": "string"
          },
          "value": {
            "kind": "number",
            "type": "uint32"
          }
        },
        "optional": false,
        "tag": 3
      }
    ],
    "minProperties": 2,
    "maxProperties": 3
  }
]